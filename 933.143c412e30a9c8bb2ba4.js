"use strict";(self.webpackChunknx=self.webpackChunknx||[]).push([[933],{3947:(xe,B,l)=>{l.r(B),l.d(B,{PostModule:()=>ze});var e=l(4788),c=l(2057),h=l(7501);let N=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-post"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[h.lC],styles:[""]}),i})();var A=l(9765),f=l(1483),D=l(4718),p=l(8002),u=l(6782),J=l(3342),d=l(4728),O=l(3232),s=l(3738),_=l(5174),y=l(9117),b=l(4831),E=l(9683),P=l(3382),T=l(3489),z=l(9192),w=l(1312),g=l(5682),q=l(5334);function F(i,r){if(1&i){const t=e.EpF();e._UZ(0,"span",29),e.TgZ(1,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitSearch()}),e._UZ(2,"i",31),e._uU(3," T\xecm ki\u1ebfm "),e.qZA(),e.TgZ(4,"a",32),e._UZ(5,"i",33),e.qZA()}if(2&i){e.oxw();const t=e.MAs(7);e.xp6(4),e.Q6J("nzDropdownMenu",t)}}function L(i,r){1&i&&e._uU(0," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u ")}function Q(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",34),e._UZ(1,"i",35),e.qZA(),e.TgZ(2,"nz-dropdown-menu",null,5),e.TgZ(4,"div",36),e.TgZ(5,"p"),e._uU(6,"Thao t\xe1c"),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"div",37),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().editItem(o)}),e._UZ(9,"i",38),e._uU(10," Ch\u1ec9nh s\u1eeda "),e.qZA(),e.TgZ(11,"div",37),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().removeItem(o)}),e._UZ(12,"i",39),e._uU(13," X\xf3a "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(3);e.Q6J("nzDropdownMenu",t)}}function H(i,r){1&i&&e._uU(0),2&i&&e.hij(" ",r.rowIndex+1," ")}function Y(i,r){1&i&&(e._uU(0),e.ALo(1,"date")),2&i&&e.hij(" ",e.xi3(1,1,r.$implicit.ngayHienThi,"dd/MM/yyyy")," ")}function $(i,r){1&i&&(e.TgZ(0,"button",41),e._uU(1,"S\u1eed d\u1ee5ng"),e.qZA())}function R(i,r){1&i&&e.YNc(0,$,2,0,"button",40),2&i&&e.Q6J("ngIf",!0===r.$implicit.isHienThi)}const G=function(){return{standalone:!0}},C=function(){return{"text-center":!0}},x=function(){return{"font-weight":"bold"}};let X=(()=>{class i{constructor(t,n,a,o,m){this.apiService=t,this.modal=n,this.notificationService=a,this.router=o,this.i18n=m,this.valueSize="large",this.listIds=[],this.listBaiViet=[],this.gridState={skip:1,take:20,sort:[{field:"id",dir:"desc"}]},this.arrIdsDanhMuc=[],this.destroyed$=new A.xQ}ngOnInit(){this.i18n.setLocale(D.L$),this.loadGrid()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}loadGrid(){this.apiService.post("CMS/BaiVietDanhMucs/GetList",{cultureId:1,pageNumber:0,pageSize:0,sortByASC:!0,sortCol:"id"}).pipe((0,p.U)(t=>t.items),(0,u.R)(this.destroyed$)).subscribe(t=>{this.listBaiViet=this.buildTreeArray(t,0),console.log(this.listBaiViet)}),this.gridView$=this.apiService.post("CMS/BaiViets/GetList",this.dataRequest()).pipe((0,p.U)(t=>({data:t.items,total:t.pagingInfo.totalItems})),(0,J.b)(t=>console.log(t)))}dataRequest(){return{arrIdsDanhMuc:this.arrIdsDanhMuc,cultureId:1,denNgay:this.date_end,isAsc:!this.gridState.sort||"asc"===this.gridState.sort[0].dir,isHienThi:this.isVisible,keyword:this.valueSearch,pageNumber:this.gridState.skip,pageSize:this.gridState.take,sortASC:!this.gridState.sort||"asc"===this.gridState.sort[0].dir,sortCol:this.gridState.sort?this.gridState.sort[0].field:"id",sortName:this.gridState.sort?this.gridState.sort[0].field:"soThuTu",tuNgay:this.date_start}}submitSearch(){console.log(this.dataRequest()),this.loadGrid()}resetSearch(){this.valueSearch=null,this.arrIdsDanhMuc=[],this.date_start=null,this.date_end=null}addBaiViet(){this.router.navigate(["/master/post/bai-viet/action"],{queryParams:{data:JSON.stringify({state:{action:d.Xv.CREATE}})}})}editItem(t){this.router.navigate(["/master/post/bai-viet/action"],{queryParams:{data:JSON.stringify({state:{action:d.Xv.UPDATE,id:t.id}})}})}removeItem(t){this.listIds=[t.id],console.log(this.listIds),this.removeListItem()}removeListItem(){this.confirmModal=this.modal.confirm({nzTitle:d.sj.TITLE,nzOkText:d.sj.Yes,nzClosable:!1,nzOkType:"danger",nzOkDanger:!0,nzCancelText:d.sj.No,nzOnOk:()=>this.apiService.delete("CMS/BaiViets",{ids:this.listIds}).pipe((0,u.R)(this.destroyed$)).subscribe(t=>{this.notificationService.showSuccessMessage(d.sj.Delete),this.loadGrid(),this.listIds=[]}),nzOnCancel:()=>this.modal.closeAll()})}sortEvent(t){this.gridState.sort=t,this.loadGrid()}buildTreeArray(t,n){const a=t.filter(o=>o.idParent<=0&&n<=0||o.idParent===n&&n>0).map(o=>({title:o.tenDanhMuc,key:o.id,expanded:!1,isLeaf:!1,children:[]}));return a.length>0&&a.map(o=>{const M=t.filter(S=>S.idParent===o.key).length;o.isLeaf=!(M>0),o.expanded=M>0,o.children=this.buildTreeArray(t,o.key)}),a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.sM),e.Y36(O.Sf),e.Y36(f.gq),e.Y36(h.F0),e.Y36(D.wi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-bai-viet"]],decls:54,vars:70,consts:[[1,"heading"],[1,"search"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Nh\u1eadp t\u1eeb kh\xf3a",3,"ngModel","ngModelOptions","ngModelChange"],["suffixIconSearch",""],["menu","nzDropdownMenu"],[1,"menu-filter"],[1,"form-group","form-menu","row"],[1,"col-lg-4","col-form-label","lab"],[1,"col-lg-8"],["nzShowSearch","","nzSize","large","nzCheckable","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn danh m\u1ee5c",2,"width","100%",3,"nzNodes","nzMaxTagCount","ngModel","ngModelChange"],["nzPlaceHolder","Ch\u1ecdn th\u1eddi \u0111i\u1ec3m","nzFormat","dd/MM/yyyy",1,"w-full","ant-picker",2,"width","100%",3,"ngModel","nzSize","ngModelChange"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Hi\u1ec3n th\u1ecb","nzNotFoundContent","Tr\u1ed1ng",3,"nzSize","ngModel","ngModelChange"],["nzCustomContent","","nzLabel","Hi\u1ec3n th\u1ecb",3,"nzValue"],["nzCustomContent","","nzLabel","Kh\xf4ng hi\u1ec3n th\u1ecb",3,"nzValue"],["nz-button","","nzType","primary","nzGhost","",3,"click"],[1,"action"],["nz-button","","nzType","primary","id","btn-add",3,"click"],["nz-button","","nzType","primary","id","btn-delete","nzDanger","",3,"disabled","click"],["kendoGridSelectBy","id",3,"data","selectable","navigable","selectedKeys","sortable","sort","height","dataStateChange","sortChange"],["kendoGridNoRecordsTemplate",""],[3,"headerClass","showSelectAll","width"],["title","Thao t\xe1c",3,"headerClass","headerStyle","width"],["kendoGridCellTemplate",""],["title","STT",3,"headerClass","headerStyle","width"],["field","tieuDe","title","Ti\xeau \u0111\u1ec1",3,"headerStyle","width"],["field","tenDanhMuc","title","Danh m\u1ee5c",3,"headerStyle","width"],["title","Ng\xe0y t\u1ea1o",3,"headerClass","headerStyle","width"],["field","isHienThi","title","Hi\u1ec3n th\u1ecb",3,"headerStyle","width","headerClass"],[1,"line"],["type","button",3,"click"],["id","icon-search","nz-icon","","nzType","search","nzTheme","outline"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","id","icon-filter","nzType","filter","nzTheme","fill"],["nz-dropdown","",3,"nzDropdownMenu"],["id","icon-group","nz-icon","","nzType","group","nzTheme","outline"],[1,"menu-hanhdong"],[3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["id","btn-hienthi","nz-button","","nzType","text",4,"ngIf"],["id","btn-hienthi","nz-button","","nzType","text"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"nz-input-group",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(o){return n.valueSearch=o}),e.qZA(),e.qZA(),e.YNc(4,F,6,1,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"nz-dropdown-menu",null,5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"label",8),e._uU(11,"Danh m\u1ee5c"),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"nz-tree-select",10),e.NdJ("ngModelChange",function(o){return n.arrIdsDanhMuc=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"label",8),e._uU(16,"T\u1eeb ng\xe0y"),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"nz-date-picker",11),e.NdJ("ngModelChange",function(o){return n.date_start=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",7),e.TgZ(20,"label",8),e._uU(21,"\u0110\u1ebfn ng\xe0y"),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"nz-date-picker",11),e.NdJ("ngModelChange",function(o){return n.date_end=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",7),e.TgZ(25,"label",8),e._uU(26,"Hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"nz-select",12),e.NdJ("ngModelChange",function(o){return n.isVisible=o}),e.TgZ(29,"nz-option",13),e._uU(30," Hi\u1ec3n th\u1ecb "),e.qZA(),e.TgZ(31,"nz-option",14),e._uU(32," Kh\xf4ng hi\u1ec3n th\u1ecb "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"button",15),e.NdJ("click",function(){return n.resetSearch()}),e._uU(34," L\xe0m m\u1edbi "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",16),e.TgZ(36,"button",17),e.NdJ("click",function(){return n.addBaiViet()}),e._uU(37,"T\u1ea1o m\u1edbi "),e.qZA(),e.TgZ(38,"button",18),e.NdJ("click",function(){return n.removeListItem()}),e._uU(39,"X\xf3a "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"kendo-grid",19),e.NdJ("dataStateChange",function(){return n.gridState})("sortChange",function(o){return n.sortEvent(o)}),e.ALo(41,"async"),e.YNc(42,L,1,0,"ng-template",20),e._UZ(43,"kendo-grid-checkbox-column",21),e.TgZ(44,"kendo-grid-column",22),e.YNc(45,Q,14,1,"ng-template",23),e.qZA(),e.TgZ(46,"kendo-grid-column",24),e.YNc(47,H,1,1,"ng-template",23),e.qZA(),e._UZ(48,"kendo-grid-column",25),e._UZ(49,"kendo-grid-column",26),e.TgZ(50,"kendo-grid-column",27),e.YNc(51,Y,2,4,"ng-template",23),e.qZA(),e.TgZ(52,"kendo-grid-column",28),e.YNc(53,R,1,1,"ng-template",23),e.qZA(),e.qZA()),2&t){const a=e.MAs(5);e.xp6(2),e.Q6J("nzSuffix",a),e.xp6(1),e.Q6J("ngModel",n.valueSearch)("ngModelOptions",e.DdM(53,G)),e.xp6(10),e.Q6J("nzNodes",n.listBaiViet)("nzMaxTagCount",5)("ngModel",n.arrIdsDanhMuc),e.xp6(5),e.Q6J("ngModel",n.date_start)("nzSize",n.valueSize),e.xp6(5),e.Q6J("ngModel",n.date_end)("nzSize",n.valueSize),e.xp6(5),e.Q6J("nzSize",n.valueSize)("ngModel",n.isVisible),e.xp6(1),e.s9C("nzValue",!0),e.xp6(2),e.s9C("nzValue",!1),e.xp6(7),e.Q6J("disabled",n.listIds.length<=0),e.xp6(2),e.Q6J("data",e.lcZ(41,51,n.gridView$))("selectable",!0)("navigable",!0)("selectedKeys",n.listIds)("sortable",!0)("sort",n.gridState.sort)("height",300),e.xp6(3),e.Tol(e.DdM(54,C)),e.Q6J("headerClass",e.DdM(55,C))("showSelectAll",!0)("width",40),e.xp6(1),e.Tol(e.DdM(56,C)),e.Q6J("headerClass",e.DdM(57,C))("headerStyle",e.DdM(58,x))("width",100),e.xp6(2),e.Tol(e.DdM(59,C)),e.Q6J("headerClass",e.DdM(60,C))("headerStyle",e.DdM(61,x))("width",50),e.xp6(2),e.Q6J("headerStyle",e.DdM(62,x))("width",300),e.xp6(1),e.Q6J("headerStyle",e.DdM(63,x))("width",170),e.xp6(1),e.Tol(e.DdM(64,C)),e.Q6J("headerClass",e.DdM(65,C))("headerStyle",e.DdM(66,x))("width",150),e.xp6(2),e.Tol(e.DdM(67,C)),e.Q6J("headerStyle",e.DdM(68,x))("width",100)("headerClass",e.DdM(69,C))}},directives:[s._Y,s.JL,s.F,_.gB,y.w,_.ke,_.Zp,s.Fj,s.JJ,s.On,b.RR,E.zr,P.uw,T.Vq,T.Ip,z.ix,w.dQ,g.MwP,g.pVy,g.sXO,g.HbC,g.bg4,g.Ztq,q.Ls,b.Ws,b.cm,c.O5],pipes:[c.Ov,c.uU],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center!important}.k-grid[_ngcontent-%COMP%]{font-size:12px;background-color:#fff;display:unset;flex-direction:column;position:relative}kendo-grid-column[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500!important;white-space:normal}#icon-group[_ngcontent-%COMP%]{font-size:14px;color:#005aa9}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:600px;height:36px;line-height:36px;padding-left:15px;outline:0}.search[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;font-size:20px;padding:5px}nz-select[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.menu-filter[_ngcontent-%COMP%]{width:558px;padding:15px;background-color:#fff;max-height:90vh;overflow:hidden auto;border:1px solid #c9ced7;box-shadow:0 1px 15px 1px #45414e14}.menu-filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#005aa9;font-weight:bold}.menu-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#005aa9;height:36px;width:100px;float:right}#icon-search[_ngcontent-%COMP%]{margin-top:2px;padding:3px;font-weight:bold;font-size:15px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#005aa9;border-color:#005aa9;color:#fff;font-weight:500;z-index:100;margin-right:5px;padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:34px;border-radius:3px}.line[_ngcontent-%COMP%]{width:1px;height:32px;margin:0 10px;background:#dceadc}.group-button[_ngcontent-%COMP%]{display:inline-flex}#btn-add[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;background-color:#005aa9;border-color:#005aa9}#btn-delete[_ngcontent-%COMP%]{background-color:#de282f;border-color:#ec1c24;color:#fff;margin-left:10px;padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;height:36px;border-radius:3px}nz-dropdown-menu[_ngcontent-%COMP%]{height:150px;width:200px;background-color:#b6b6b6}#btn-hienthi[_ngcontent-%COMP%]{background-color:#0cb664;display:inline-block;padding:4px 15px;border-radius:4px;color:#fff;font-weight:400;font-size:12px}.menu-hanhdong[_ngcontent-%COMP%]{height:140px;width:230px;background:#ffffff;box-shadow:#64646f33 0 7px 29px}.menu-hanhdong[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500!important;padding-left:10px;padding-top:10px}.menu-hanhdong[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;padding:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#005aa9;margin-right:5px;margin-left:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{color:#005aa9}.ant-input-affix-wrapper[_ngcontent-%COMP%]{padding:0;width:70%}"]}),i})();function j(i,r){if(1&i){const t=e.EpF();e._UZ(0,"span",26),e.TgZ(1,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().submitSearch()}),e._UZ(2,"i",28),e._uU(3," T\xecm ki\u1ebfm "),e.qZA(),e.TgZ(4,"a",29),e._UZ(5,"i",30),e.qZA()}if(2&i){e.oxw();const t=e.MAs(7);e.xp6(4),e.Q6J("nzDropdownMenu",t)}}function K(i,r){if(1&i&&e._UZ(0,"nz-option",31),2&i){const t=r.$implicit;e.Q6J("nzLabel",t.tenDanhMuc)("nzValue",t.id)}}function W(i,r){1&i&&e._uU(0),2&i&&e.hij(" + ",r.$implicit.length," ")}function ee(i,r){1&i&&e._uU(0," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u ")}function te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",32),e._UZ(1,"i",33),e.qZA(),e.TgZ(2,"nz-dropdown-menu",null,5),e.TgZ(4,"div",34),e.TgZ(5,"p"),e._uU(6,"Thao t\xe1c"),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"div",35),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().editItem(o)}),e._UZ(9,"i",36),e._uU(10," Ch\u1ec9nh s\u1eeda "),e.qZA(),e.TgZ(11,"div",35),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().removeItem(o)}),e._UZ(12,"i",37),e._uU(13," X\xf3a "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(3);e.Q6J("nzDropdownMenu",t)}}function ne(i,r){1&i&&e._uU(0),2&i&&e.hij(" ",r.rowIndex+1," ")}function ie(i,r){1&i&&(e.TgZ(0,"button",39),e._uU(1,"S\u1eed d\u1ee5ng"),e.qZA())}function oe(i,r){1&i&&e.YNc(0,ie,2,0,"button",38),2&i&&e.Q6J("ngIf",!0===r.$implicit.isSuDung)}const ae=function(){return{standalone:!0}},Z=function(){return{"text-center":!0}},v=function(){return{"font-weight":"bold"}};let re=(()=>{class i{constructor(t,n,a,o){this.apiService=t,this.modal=n,this.notificationService=a,this.router=o,this.valueSize="large",this.listIds=[],this.listDanhMuc=[],this.gridState={skip:1,take:20,sort:[{field:"id",dir:"desc"}]},this.arrIdsParent=[],this.destroyed$=new A.xQ}ngOnInit(){this.loadGrid()}dataRequest(){return{arrIdsParent:this.arrIdsParent,cultureId:1,isAsc:!this.gridState.sort||"asc"===this.gridState.sort[0].dir,isFeedback:null,isSuDung:null!=this.isVisible?JSON.parse(this.isVisible):null,keyword:this.valueSearch,pageNumber:this.gridState.skip,pageSize:this.gridState.take,sortASC:!this.gridState.sort||"asc"===this.gridState.sort[0].dir,sortCol:this.gridState.sort?this.gridState.sort[0].field:"id",sortName:this.gridState.sort?this.gridState.sort[0].field:"soThuTu"}}submitSearch(){console.log(this.arrIdsParent),this.loadGrid()}addDanhMuc(){this.router.navigate(["/master/post/danh-muc/action"],{queryParams:{data:JSON.stringify({state:{action:d.Xv.CREATE}})}})}editItem(t){this.router.navigate(["/master/post/danh-muc/action"],{queryParams:{data:JSON.stringify({state:{action:d.Xv.UPDATE,id:t.id}})}})}removeItem(t){this.listIds=[t.id],console.log(this.listIds),this.removeListItem()}removeListItem(){this.confirmModal=this.modal.confirm({nzTitle:d.sj.TITLE,nzOkText:d.sj.Yes,nzClosable:!1,nzOkType:"danger",nzOkDanger:!0,nzCancelText:d.sj.No,nzOnOk:()=>this.apiService.delete("CMS/KSVCanBietDanhMucs",{ids:this.listIds}).pipe((0,u.R)(this.destroyed$)).subscribe(t=>{this.notificationService.showSuccessMessage(d.sj.Delete),this.loadGrid(),this.listIds=[]}),nzOnCancel:()=>this.modal.closeAll()})}sortEvent(t){this.gridState.sort=t,this.loadGrid(),console.log("Sort")}loadGrid(){this.apiService.post("CMS/BaiVietDanhMucs/GetList",{cultureId:1,level:1,pageNumber:0,pageSize:0,sortByASC:!0,sortCol:"id"}).pipe((0,p.U)(t=>t.items),(0,u.R)(this.destroyed$)).subscribe(t=>{this.listDanhMuc=t,console.log(t)}),this.gridView$=this.apiService.post("CMS/BaiVietDanhMucs/GetList",this.dataRequest()).pipe((0,p.U)(t=>({data:t.items,total:t.pagingInfo.totalItems})))}resetSearch(){this.valueSearch=null,this.arrIdsParent=[],this.isVisible=null}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.sM),e.Y36(O.Sf),e.Y36(f.gq),e.Y36(h.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-danh-muc"]],decls:41,vars:60,consts:[[1,"heading"],[1,"search"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","Nh\u1eadp t\u1eeb kh\xf3a",3,"ngModel","ngModelOptions","ngModelChange"],["suffixIconSearch",""],["menu","nzDropdownMenu"],[1,"menu-filter"],["nzMode","multiple","nzPlaceHolder","Ch\u1ecdn danh m\u1ee5c","nzAllowClear","",3,"nzMaxTagCount","nzSize","nzMaxTagPlaceholder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Hi\u1ec3n th\u1ecb","nzNotFoundContent","Tr\u1ed1ng",3,"nzSize","ngModel","ngModelChange"],["nzCustomContent","","nzLabel","Hi\u1ec3n th\u1ecb",3,"nzValue"],["nzCustomContent","","nzLabel","Kh\xf4ng hi\u1ec3n th\u1ecb",3,"nzValue"],["nz-button","","nzType","primary","nzGhost","",3,"click"],[1,"action"],["nz-button","","nzType","primary","id","btn-add",3,"click"],["nz-button","","nzType","primary","id","btn-delete","nzDanger","",3,"disabled","click"],["kendoGridSelectBy","id",3,"data","selectable","navigable","selectedKeys","sortable","sort","height","dataStateChange","sortChange"],["kendoGridNoRecordsTemplate",""],[3,"headerClass","showSelectAll","width"],["title","Thao t\xe1c",3,"headerClass","headerStyle","width"],["kendoGridCellTemplate",""],["title","STT",3,"headerClass","headerStyle","width"],["field","tenDanhMuc","title","T\xean danh m\u1ee5c",3,"headerStyle","width"],["field","nameParent","title","Danh m\u1ee5c cha",3,"headerStyle","width"],["field","isHienThi","title","Hi\u1ec3n th\u1ecb",3,"headerStyle","width","headerClass"],[1,"line"],["type","button",3,"click"],["id","icon-search","nz-icon","","nzType","search","nzTheme","outline"],["nz-dropdown","","nzTrigger","click","nzPlacement","bottomRight",3,"nzDropdownMenu"],["nz-icon","","id","icon-filter","nzType","filter","nzTheme","fill"],[3,"nzLabel","nzValue"],["nz-dropdown","",3,"nzDropdownMenu"],["id","icon-group","nz-icon","","nzType","group","nzTheme","outline"],[1,"menu-hanhdong"],[3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["id","btn-hienthi","nz-button","","nzType","text",4,"ngIf"],["id","btn-hienthi","nz-button","","nzType","text"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"nz-input-group",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(o){return n.valueSearch=o}),e.qZA(),e.qZA(),e.YNc(4,j,6,1,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(6,"nz-dropdown-menu",null,5),e.TgZ(8,"div",6),e.TgZ(9,"span"),e._uU(10,"Ch\u1ecdn danh m\u1ee5c"),e.qZA(),e.TgZ(11,"nz-select",7),e.NdJ("ngModelChange",function(o){return n.arrIdsParent=o}),e.YNc(12,K,1,2,"nz-option",8),e.qZA(),e.YNc(13,W,1,1,"ng-template",null,9,e.W1O),e.TgZ(15,"span"),e._uU(16,"Hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(17,"nz-select",10),e.NdJ("ngModelChange",function(o){return n.isVisible=o}),e.TgZ(18,"nz-option",11),e._uU(19," Hi\u1ec3n th\u1ecb "),e.qZA(),e.TgZ(20,"nz-option",12),e._uU(21," Kh\xf4ng hi\u1ec3n th\u1ecb "),e.qZA(),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){return n.resetSearch()}),e._uU(23," L\xe0m m\u1edbi "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"button",15),e.NdJ("click",function(){return n.addDanhMuc()}),e._uU(26,"T\u1ea1o m\u1edbi "),e.qZA(),e.TgZ(27,"button",16),e.NdJ("click",function(){return n.removeListItem()}),e._uU(28,"X\xf3a "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"kendo-grid",17),e.NdJ("dataStateChange",function(){return n.gridState})("sortChange",function(o){return n.sortEvent(o)}),e.ALo(30,"async"),e.YNc(31,ee,1,0,"ng-template",18),e._UZ(32,"kendo-grid-checkbox-column",19),e.TgZ(33,"kendo-grid-column",20),e.YNc(34,te,14,1,"ng-template",21),e.qZA(),e.TgZ(35,"kendo-grid-column",22),e.YNc(36,ne,1,1,"ng-template",21),e.qZA(),e._UZ(37,"kendo-grid-column",23),e._UZ(38,"kendo-grid-column",24),e.TgZ(39,"kendo-grid-column",25),e.YNc(40,oe,1,1,"ng-template",21),e.qZA(),e.qZA()),2&t){const a=e.MAs(5),o=e.MAs(14);e.xp6(2),e.Q6J("nzSuffix",a),e.xp6(1),e.Q6J("ngModel",n.valueSearch)("ngModelOptions",e.DdM(46,ae)),e.xp6(8),e.Q6J("nzMaxTagCount",5)("nzSize",n.valueSize)("nzMaxTagPlaceholder",o)("ngModel",n.arrIdsParent),e.xp6(1),e.Q6J("ngForOf",n.listDanhMuc),e.xp6(5),e.Q6J("nzSize",n.valueSize)("ngModel",n.isVisible),e.xp6(1),e.s9C("nzValue",!0),e.xp6(2),e.s9C("nzValue",!1),e.xp6(7),e.Q6J("disabled",n.listIds.length<=0),e.xp6(2),e.Q6J("data",e.lcZ(30,44,n.gridView$))("selectable",!0)("navigable",!0)("selectedKeys",n.listIds)("sortable",!0)("sort",n.gridState.sort)("height",300),e.xp6(3),e.Tol(e.DdM(47,Z)),e.Q6J("headerClass",e.DdM(48,Z))("showSelectAll",!0)("width",40),e.xp6(1),e.Tol(e.DdM(49,Z)),e.Q6J("headerClass",e.DdM(50,Z))("headerStyle",e.DdM(51,v))("width",100),e.xp6(2),e.Tol(e.DdM(52,Z)),e.Q6J("headerClass",e.DdM(53,Z))("headerStyle",e.DdM(54,v))("width",50),e.xp6(2),e.Q6J("headerStyle",e.DdM(55,v))("width",200),e.xp6(1),e.Q6J("headerStyle",e.DdM(56,v))("width",250),e.xp6(1),e.Tol(e.DdM(57,Z)),e.Q6J("headerStyle",e.DdM(58,v))("width",100)("headerClass",e.DdM(59,Z))}},directives:[s._Y,s.JL,s.F,_.gB,y.w,_.ke,_.Zp,s.Fj,s.JJ,s.On,b.RR,T.Vq,c.sg,T.Ip,z.ix,w.dQ,g.MwP,g.pVy,g.sXO,g.HbC,g.bg4,g.Ztq,q.Ls,b.Ws,b.cm,c.O5],pipes:[c.Ov],styles:[".heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center!important}.k-grid[_ngcontent-%COMP%]{font-size:12px;background-color:#fff;display:unset;flex-direction:column;position:relative}kendo-grid-column[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500!important;white-space:normal}#icon-group[_ngcontent-%COMP%]{font-size:14px;color:#005aa9}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:600px;height:36px;line-height:36px;padding-left:15px;outline:0}.search[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;font-size:20px;padding:5px}nz-select[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.menu-filter[_ngcontent-%COMP%]{width:558px;padding:15px;background-color:#fff;max-height:90vh;overflow:hidden auto;border:1px solid #c9ced7;box-shadow:0 1px 15px 1px #45414e14}.menu-filter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#005aa9;font-weight:bold}.menu-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#005aa9;height:36px;width:100px;float:right}.menu-filter[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{padding:10px 0}#icon-search[_ngcontent-%COMP%]{margin-top:2px;padding:3px;font-weight:bold;font-size:15px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#005aa9;border-color:#005aa9;color:#fff;font-weight:500;z-index:100;margin-right:5px;padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:34px;border-radius:3px}.line[_ngcontent-%COMP%]{width:1px;height:32px;margin:0 10px;background:#dceadc}.group-button[_ngcontent-%COMP%]{display:inline-flex}#btn-add[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;background-color:#005aa9;border-color:#005aa9}#btn-delete[_ngcontent-%COMP%]{background-color:#de282f;border-color:#ec1c24;color:#fff;margin-left:10px;padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;height:36px;border-radius:3px}nz-dropdown-menu[_ngcontent-%COMP%]{height:150px;width:200px;background-color:#b6b6b6}#btn-hienthi[_ngcontent-%COMP%]{background-color:#0cb664;display:inline-block;padding:4px 15px;border-radius:4px;color:#fff;font-weight:400;font-size:12px}.menu-hanhdong[_ngcontent-%COMP%]{height:140px;width:230px;background:#ffffff;box-shadow:#64646f33 0 7px 29px}.menu-hanhdong[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500!important;padding-left:10px;padding-top:10px}.menu-hanhdong[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{cursor:pointer;font-size:14px;padding:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#005aa9;margin-right:5px;margin-left:5px}.menu-hanhdong[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{color:#005aa9}.ant-input-affix-wrapper[_ngcontent-%COMP%]{padding:0;width:70%}"]}),i})();var se=l(4762),k=l(8303),V=l(7505),U=l(5591);function le(i,r){1&i&&(e.TgZ(0,"small",14),e._uU(1,"Kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng "),e.qZA())}function de(i,r){1&i&&(e.TgZ(0,"small",14),e._uU(1,"Kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng "),e.qZA())}function ue(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submitDataThemSua()}),e.TgZ(1,"div",2),e.TgZ(2,"div"),e.TgZ(3,"h3",3),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"ul"),e.TgZ(7,"li"),e.TgZ(8,"button",5),e._uU(9,"L\u01b0u thay \u0111\u1ed5i"),e.qZA(),e.qZA(),e.TgZ(10,"li"),e.TgZ(11,"button",6),e._uU(12,"Tr\u1edf v\u1ec1 "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"div",8),e.TgZ(15,"div",9),e.TgZ(16,"div",10),e.TgZ(17,"div",11),e.TgZ(18,"label",12),e._uU(19,"Danh m\u1ee5c"),e.qZA(),e.TgZ(20,"div"),e._UZ(21,"nz-tree-select",13),e.qZA(),e.TgZ(22,"label",12),e._uU(23,"Ti\xeau \u0111\u1ec1"),e.TgZ(24,"span",14),e._uU(25,"(*)"),e.qZA(),e.qZA(),e._UZ(26,"input",15),e.TgZ(27,"div"),e.YNc(28,le,2,0,"small",16),e.qZA(),e.TgZ(29,"label",12),e._uU(30,"N\u1ed9i dung"),e.TgZ(31,"span",14),e._uU(32,"(*)"),e.qZA(),e.qZA(),e._UZ(33,"ckeditor",17),e.TgZ(34,"div"),e.YNc(35,de,2,0,"small",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",18),e.TgZ(37,"div",19),e.TgZ(38,"div",11),e.TgZ(39,"label",12),e._uU(40,"T\u1ec7p \u0111\xednh k\xe8m"),e.qZA(),e.TgZ(41,"input",20,21),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(42);return e.oxw().uploadService.preview(a.files)}),e.qZA(),e.TgZ(43,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleUploadFile()}),e._uU(44,"T\u1ea3i t\u1ec7p l\xean"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",19),e.TgZ(46,"div",11),e.TgZ(47,"label",12),e._uU(48,"H\xecnh \u0111\u1ea1i di\u1ec7n"),e.qZA(),e.TgZ(49,"input",20,23),e.NdJ("change",function(){e.CHM(t);const a=e.MAs(50);return e.oxw().uploadService.preview(a.files)}),e.qZA(),e.TgZ(51,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleUploadImg()}),e._uU(52,"T\u1ea3i t\u1ec7p l\xean"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",19),e.TgZ(54,"div",11),e.TgZ(55,"div",24),e.TgZ(56,"label",25),e._uU(57,"Hi\u1ec3n th\u1ecb"),e.qZA(),e._UZ(58,"br"),e.TgZ(59,"label",12),e._uU(60,"Ng\xe0y hi\u1ec3n th\u1ecb"),e.qZA(),e._UZ(61,"nz-date-picker",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",27),e.TgZ(63,"div",11),e.TgZ(64,"label",12),e._uU(65,"Ti\xeau \u0111\u1ec1 trang"),e.qZA(),e._UZ(66,"input",28),e.TgZ(67,"label",12),e._uU(68,"\u0110\u01b0\u1eddng d\u1eabn / Alias"),e.qZA(),e._UZ(69,"input",29),e.TgZ(70,"label",12),e._uU(71,"Th\u1ebb m\xf4 t\u1ea3"),e.qZA(),e._UZ(72,"textarea",30),e.TgZ(73,"label",12),e._uU(74,"Meta - Key"),e.qZA(),e._UZ(75,"textarea",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.formThemSuaBaiViet),e.xp6(4),e.Oqu(t.title),e.xp6(17),e.Q6J("nzNodes",t.listDanhMuc),e.xp6(7),e.Q6J("ngIf",(t.f.tieuDe.touched||t.submited)&&(null==t.f.tieuDe.errors?null:t.f.tieuDe.errors.required)),e.xp6(7),e.Q6J("ngIf",(t.f.noiDung.touched||t.submited)&&(null==t.f.noiDung.errors?null:t.f.noiDung.errors.required)),e.xp6(26),e.Q6J("nzSize",t.valueSize)("nzDefaultPickerValue",t.ngayHienThi)}}let ce=(()=>{class i{constructor(t,n,a,o,m,M,S){this.fb=t,this.apiService=n,this.notificationService=a,this.router=o,this.route=m,this.uploadService=M,this.i18n=S,this.submited=!1,this.listDanhMuc=[],this.valueSize="large",this.idsFileDinhKem=[],this.ngayHienThi=new Date,this.destroyed$=new A.xQ}ngOnInit(){return(0,se.mG)(this,void 0,void 0,function*(){this.i18n.setLocale(D.L$),yield this.getListDanhMuc(),yield this.getDataQueryParam(),yield this.getItemById(),this.formThemSuaBaiViet=this.fb.group({cultureId:1,cultureIdMap:0,cultureName:"vi_VN",forWeb:0,hinhDaiDien:this.idHinhDaiDien,id:this.idBaiViet,idDanhMuc:this.idDanhMuc,idHinhDaiDien:null,idsFileDinhKem:[],isHienThi:[!0],ngayHienThi:this.ngayHienThi,noiDung:["",s.kI.required],pathHinhDaiDien:"",seoAlias:"",seoMetaDesc:"",seoMetaKey:"",seoTitle:"",soLanXem:0,tieuDe:["",s.kI.required]}),this.getTiTle()})}getListDanhMuc(){this.apiService.post("CMS/BaiVietDanhMucs/GetList",{cultureId:1,pageNumber:0,pageSize:0,sortByASC:!0,sortCol:"id"}).pipe((0,p.U)(t=>t.items),(0,u.R)(this.destroyed$)).subscribe(t=>{console.log(t),this.listDanhMuc=this.buildTreeArray(t,0),console.log(this.listDanhMuc)})}getDataQueryParam(){this.route.queryParams.pipe((0,p.U)(t=>JSON.parse(t.data)),(0,p.U)(t=>t.state),(0,u.R)(this.destroyed$)).subscribe(t=>{console.log(t),this.action=t.action,this.idBaiViet=t.id})}getItemById(){null!=this.idBaiViet&&this.apiService.post("CMS/BaiViets/GetById",{id:this.idBaiViet,cultureId:1,cultureIdMap:0},!0).pipe((0,u.R)(this.destroyed$)).subscribe(t=>{this.dataItem=t,this.action===d.Xv.UPDATE&&this.formThemSuaBaiViet.patchValue(this.dataItem)})}getTiTle(){this.action===d.Xv.UPDATE&&(this.title="C\u1eadp nh\u1eadt b\xe0i vi\u1ebft"),this.action===d.Xv.CREATE&&(this.title="T\u1ea1o m\u1edbi b\xe0i vi\u1ebft")}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}get f(){return this.formThemSuaBaiViet.controls}submitDataThemSua(){var t;if(null===(t=this.formThemSuaBaiViet)||void 0===t?void 0:t.invalid)(0,k.n)(this.formThemSuaBaiViet);else switch(this.action){case d.Xv.CREATE:console.log(this.formThemSuaBaiViet.value),this.apiService.post("CMS/Baiviets",this.formThemSuaBaiViet.value).pipe((0,u.R)(this.destroyed$)).subscribe(n=>{this.notificationService.showSuccessMessage(d.sj.addSuccess),this.router.navigateByUrl("/master/post/bai-viet")},n=>{console.log(n),this.notificationService.showErrorMessage(n.error.errorMessages[0].errorMessage)});break;case d.Xv.UPDATE:this.apiService.put("CMS/BaiViets",this.formThemSuaBaiViet.value).pipe((0,u.R)(this.destroyed$)).subscribe(n=>{this.notificationService.showSuccessMessage(d.sj.updateSuccess),this.router.navigateByUrl("/master/post/bai-viet")},n=>{console.log(n),this.notificationService.showErrorMessage(n.error.errorMessages[0].errorMessage)})}}handleUploadFile(){const t=new FormData;t.append("formFiles",this.uploadService.binaryUrl),this.apiService.post("CMS/FileQuanLyFile/UploadFile?",t).pipe((0,p.U)(n=>n.files),(0,u.R)(this.destroyed$)).subscribe(n=>{this.idsFileDinhKem.push(n[0].id),this.formThemSuaBaiViet.controls.idsFileDinhKem.setValue(this.idsFileDinhKem),this.notificationService.showSuccessMessage("Upload th\xe0nh c\xf4ng!")})}handleUploadImg(){const t=new FormData;t.append("formFiles",this.uploadService.binaryUrl),this.apiService.post("CMS/FileQuanLyFile/UploadFile?",t).pipe((0,p.U)(n=>n.files),(0,u.R)(this.destroyed$)).subscribe(n=>{this.idHinhDaiDien=n[0].id,this.formThemSuaBaiViet.controls.idHinhDaiDien.setValue(this.idHinhDaiDien),this.notificationService.showSuccessMessage("Upload th\xe0nh c\xf4ng!")})}buildTreeArray(t,n){const a=t.filter(o=>o.idParent<=0&&n<=0||o.idParent===n&&n>0).map(o=>({title:o.tenDanhMuc,key:o.id,expanded:!1,isLeaf:!1,children:[]}));return a.length>0&&a.map(o=>{const M=t.filter(S=>S.idParent===o.key).length;o.isLeaf=!(M>0),o.expanded=M>0,o.children=this.buildTreeArray(t,o.key)}),a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(f.sM),e.Y36(f.gq),e.Y36(h.F0),e.Y36(h.gz),e.Y36(f.C7),e.Y36(D.wi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-add-edit-bai-viet"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-heading"],[2,"font-size","20px"],[1,"action"],["nz-button","","nzType","primary","id","btn-save","type","submit"],["nz-button","","nzType","primary","id","btn-back","type","button","routerLink","/master/post/bai-viet"],[1,"rounded"],[1,"row","align-items-stretch"],[1,"col-xl-8","col-lg-7","col-md-12"],[1,"border","bg-white","h-100"],[1,"p-3","py-3"],[1,"labels"],["nzSize","large","formControlName","idDanhMuc","nzNotFoundContent","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u","nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn danh m\u1ee5c",2,"width","100%",3,"nzNodes"],[1,"text-danger"],["formControlName","tieuDe","nz-input","","placeholder","T\xean danh m\u1ee5c","nzSize","large"],["class","text-danger",4,"ngIf"],["formControlName","noiDung"],[1,"col-xl-4","col-lg-5","col-md-12"],[1,"border","bg-white","mb-3"],["type","file",3,"change"],["fileUpload",""],["type","button",3,"click"],["imgUpload",""],[1,"form-check"],["nz-checkbox","","formControlName","isHienThi"],["formControlName","ngayHienThi","nzPlaceHolder","Ch\u1ecdn th\u1eddi \u0111i\u1ec3m","nzFormat","dd/MM/yyyy",1,"w-full","ant-picker",2,"width","100%",3,"nzSize","nzDefaultPickerValue"],[1,"border","bg-white"],["formControlName","seoTitle","type","text","nz-input","","placeholder","","nzSize","large"],["formControlName","seoAlias","type","text","nz-input","","placeholder","","nzSize","large"],["formControlName","seoMetaKey",1,"form-control","mb-3","description-area"],["formControlName","seoMetaDesc",1,"form-control","mb-3","description-area"]],template:function(t,n){1&t&&e.YNc(0,ue,76,7,"form",0),2&t&&e.Q6J("ngIf",n.formThemSuaBaiViet)},directives:[c.O5,s._Y,s.JL,s.sg,z.ix,w.dQ,y.w,h.rH,E.zr,s.JJ,s.u,s.Fj,_.Zp,V.u,U.Ie,P.uw],styles:[".form-control[_ngcontent-%COMP%]:focus{box-shadow:inset 0 1px #3f3f440d!important;border:1px solid #c4cdd5;border-radius:3px;color:#000}.back[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.labels[_ngcontent-%COMP%]{color:#102048;font-weight:700;font-size:15px;padding-top:10px}.form-check[_ngcontent-%COMP%]{padding-left:0;font-weight:700}nz-select[_ngcontent-%COMP%]{margin:0 8px 10px 0;width:120px}.form-heading[_ngcontent-%COMP%]{justify-content:space-between;align-items:center!important;display:flex}.form-heading[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;list-style:none}.form-heading[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}#btn-save[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;background-color:#005aa9;border-color:#005aa9}#btn-back[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;color:#005aa9;background:#fff;border:1px solid #005aa9}#addDanhMuc[_ngcontent-%COMP%]{color:#005aa9;margin-top:20px;font-weight:500;cursor:pointer}"]}),i})(),he=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-them-sua-bai-viet"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"nx-add-edit-bai-viet")},directives:[ce],encapsulation:2}),i})();function ge(i,r){if(1&i&&(e.TgZ(0,"nz-option",28),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("nzLabel",t.tenDanhMuc),e.Q6J("nzValue",t.id),e.xp6(1),e.hij(" ",t.tenDanhMuc," ")}}function pe(i,r){1&i&&(e.TgZ(0,"small",14),e._uU(1,"Kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng "),e.qZA())}let me=(()=>{class i{constructor(t,n,a,o,m,M){this.fb=t,this.apiService=n,this.notificationService=a,this.router=o,this.route=m,this.uploadService=M,this.submited=!1,this.size="large",this.listDanhMuc=[],this.destroyed$=new A.xQ}ngOnInit(){this.getListDanhMuc(),this.route.queryParams.pipe((0,p.U)(t=>JSON.parse(t.data)),(0,p.U)(t=>t.state),(0,u.R)(this.destroyed$)).subscribe(t=>{console.log(t),this.action=t.action,this.idDanhMuc=t.id}),null!=this.idDanhMuc&&this.apiService.post("CMS/BaiVietDanhMucs/GetById",{cultureId:1,cultureIdMap:0,id:this.idDanhMuc},!0).pipe((0,u.R)(this.destroyed$)).subscribe(t=>{this.dataItem=t,this.action===d.Xv.UPDATE&&this.formThemSuaDanhMuc.patchValue(this.dataItem)}),this.formThemSuaDanhMuc=this.fb.group({cultureId:1,cultureIdMap:0,cultureName:"vi_VN",id:this.idDanhMuc,idParent:[],isFeedback:!0,isRSS:!1,isSuDung:!0,ghiChu:[""],seoAlias:[""],seoMetaDesc:[""],seoMetaKey:[""],seoTitle:[""],soThuTu:null,tenDanhMuc:["",s.kI.required]}),this.getTiTle()}getListDanhMuc(){this.apiService.post("CMS/BaiVietDanhMucs/GetList",{arrIdsExclude:[],cultureId:1,level:1,pageNumber:0,pageSize:0,sortByASC:!0,sortCol:"id"}).pipe((0,p.U)(t=>t.items),(0,u.R)(this.destroyed$)).subscribe(t=>{console.log(t),this.listDanhMuc=t})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getTiTle(){this.action===d.Xv.UPDATE&&(this.title="C\u1eadp nh\u1eadt danh m\u1ee5c b\xe0i vi\u1ebft"),this.action===d.Xv.CREATE&&(this.title="T\u1ea1o m\u1edbi danh m\u1ee5c b\xe0i vi\u1ebft")}submitDataThemSua(){var t;if(null===(t=this.formThemSuaDanhMuc)||void 0===t?void 0:t.invalid)(0,k.n)(this.formThemSuaDanhMuc);else switch(this.action){case d.Xv.CREATE:this.apiService.post("CMS/BaiVietDanhMucs",this.formThemSuaDanhMuc.value).pipe((0,u.R)(this.destroyed$)).subscribe(n=>{this.notificationService.showSuccessMessage(d.sj.addSuccess),this.router.navigateByUrl("/master/post/danh-muc")},n=>{this.notificationService.showErrorMessage(n.error.errorMessages[0].errorMessage)});break;case d.Xv.UPDATE:this.apiService.put("CMS/BaiVietDanhMucs",this.formThemSuaDanhMuc.value).pipe((0,u.R)(this.destroyed$)).subscribe(n=>{this.notificationService.showSuccessMessage(d.sj.updateSuccess),this.router.navigateByUrl("/master/post/danh-muc")},n=>{console.log(n),this.notificationService.showErrorMessage(n.error.errorMessages[0].errorMessage)})}}get f(){return this.formThemSuaDanhMuc.controls}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.qu),e.Y36(f.sM),e.Y36(f.gq),e.Y36(h.F0),e.Y36(h.gz),e.Y36(f.C7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-add-edit-danh-muc"]],decls:55,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-heading"],[2,"font-size","20px"],[1,"action"],["nz-button","","nzType","primary","id","btn-save","type","submit"],["nz-button","","nzType","primary","id","btn-back","type","button","routerLink","/master/post/danh-muc"],[1,"rounded"],[1,"row","align-items-stretch"],[1,"col-xl-8","col-lg-7","col-md-12"],[1,"border","bg-white","h-100"],[1,"p-3","py-3"],[1,"labels"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Ch\u1ecdn danh m\u1ee5c","formControlName","idParent","nzNotFoundContent","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",3,"nzSize"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"text-danger"],["formControlName","tenDanhMuc","nz-input","","placeholder","T\xean ng\xe0nh","nzSize","large"],["class","text-danger",4,"ngIf"],["formControlName","ghiChu",1,"form-control","mb-3","description-area"],["formControlName","soThuTu","type","number","nz-input","","placeholder","0","nzSize","large"],[1,"col-xl-4","col-lg-5","col-md-12"],[1,"border","bg-white","mb-3"],[1,"form-check"],["nz-checkbox","","formControlName","isSuDung"],[1,"border","bg-white"],["formControlName","seoTitle","type","text","nz-input","","placeholder","","nzSize","large"],["formControlName","seoAlias","type","text","nz-input","","placeholder","","nzSize","large"],["formControlName","seoMetaKey",1,"form-control","mb-3","description-area"],["formControlName","seoMetaDesc",1,"form-control","mb-3","description-area"],["nzCustomContent","",3,"nzLabel","nzValue"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.submitDataThemSua()}),e.TgZ(1,"div",1),e.TgZ(2,"div"),e.TgZ(3,"h3",2),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"ul"),e.TgZ(7,"li"),e.TgZ(8,"button",4),e._uU(9,"L\u01b0u thay \u0111\u1ed5i"),e.qZA(),e.qZA(),e.TgZ(10,"li"),e.TgZ(11,"button",5),e._uU(12,"Tr\u1edf v\u1ec1 "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.TgZ(16,"div",9),e.TgZ(17,"div",10),e.TgZ(18,"label",11),e._uU(19,"Danh m\u1ee5c cha"),e.qZA(),e.TgZ(20,"nz-select",12),e.YNc(21,ge,2,3,"nz-option",13),e.qZA(),e.TgZ(22,"label",11),e._uU(23,"T\xean"),e.TgZ(24,"span",14),e._uU(25,"(*)"),e.qZA(),e.qZA(),e._UZ(26,"input",15),e.TgZ(27,"div"),e.YNc(28,pe,2,0,"small",16),e.qZA(),e.TgZ(29,"label",11),e._uU(30,"M\xf4 t\u1ea3"),e.qZA(),e._UZ(31,"textarea",17),e.TgZ(32,"label",11),e._uU(33,"S\u1ed1 th\u1ee9 t\u1ef1"),e.qZA(),e._UZ(34,"input",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",19),e.TgZ(36,"div",20),e.TgZ(37,"div",10),e.TgZ(38,"div",21),e.TgZ(39,"label",22),e._uU(40,"Hi\u1ec3n th\u1ecb"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",23),e.TgZ(42,"div",10),e.TgZ(43,"label",11),e._uU(44,"Ti\xeau \u0111\u1ec1 trang"),e.qZA(),e._UZ(45,"input",24),e.TgZ(46,"label",11),e._uU(47,"\u0110\u01b0\u1eddng d\u1eabn / Alias"),e.qZA(),e._UZ(48,"input",25),e.TgZ(49,"label",11),e._uU(50,"Th\u1ebb m\xf4 t\u1ea3"),e.qZA(),e._UZ(51,"textarea",26),e.TgZ(52,"label",11),e._uU(53,"Meta - Key"),e.qZA(),e._UZ(54,"textarea",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.formThemSuaDanhMuc),e.xp6(4),e.Oqu(n.title),e.xp6(16),e.Q6J("nzSize",n.size),e.xp6(1),e.Q6J("ngForOf",n.listDanhMuc),e.xp6(7),e.Q6J("ngIf",(n.f.tenDanhMuc.touched||n.submited)&&(null==n.f.tenDanhMuc.errors?null:n.f.tenDanhMuc.errors.required)))},directives:[s._Y,s.JL,s.sg,z.ix,w.dQ,y.w,h.rH,T.Vq,s.JJ,s.u,c.sg,s.Fj,_.Zp,c.O5,s.wV,U.Ie,T.Ip],styles:[".form-control[_ngcontent-%COMP%]:focus{box-shadow:inset 0 1px #3f3f440d!important;border:1px solid #c4cdd5;border-radius:3px;color:#000}.back[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.labels[_ngcontent-%COMP%]{color:#102048;font-weight:700;font-size:15px;padding-top:10px}.form-check[_ngcontent-%COMP%]{margin-top:15px;padding-left:0;font-weight:700}nz-select[_ngcontent-%COMP%]{margin:0 8px 10px 0;width:120px}.form-heading[_ngcontent-%COMP%]{justify-content:space-between;align-items:center!important;display:flex}.form-heading[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;list-style:none}.form-heading[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin:0 3px}#btn-save[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;background-color:#005aa9;border-color:#005aa9}#btn-back[_ngcontent-%COMP%]{padding:.9rem 1.5rem;cursor:pointer;display:inline-flex;align-items:center;position:relative;height:36px;border-radius:3px;color:#005aa9;background:#fff;border:1px solid #005aa9}[_nghost-%COMP%]     .avatar-uploader>.ant-upload{width:128px;height:128px}"]}),i})(),fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nx-them-sua-danh-muc"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"nx-add-edit-danh-muc")},directives:[me],encapsulation:2}),i})(),_e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,s.UX,z.sL,h.Bz,E.cq,_.o7,V.d,U.Wr,P.Hb,s.u5,T.LV]]}),i})();var I=l(4479),Ce=l(8497),Me=l(1335);(0,c.qS)(l.n(Me)());const Ze=[{path:"",component:N,children:[{path:"bai-viet",component:X},{path:"bai-viet/action",component:he},{path:"danh-muc",component:re},{path:"danh-muc/action",component:fe}]}],be=[g.zE6,I.Su,O.Qp];let ze=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:e.soG,useValue:"vi-VN"}],imports:[[c.ez,h.Bz,h.Bz.forChild(Ze),be,I.m8,Ce.JF,c.ez,_e,h.Bz,_.o7,s.u5,q.PV,b.b1,E.cq,P.Hb,z.sL,T.LV]]}),i})()}}]);